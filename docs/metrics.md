Tab Center Launch Metrics

# Tab Center Metrics

A summary of the metrics the Tab Center add-on will record.

**Definitions:**

- **Tab Center** — The vertical tab tray on the right side of the browser.
- **Pin/Unpin Tab Center** — Locking or unlocking the tab center UI to/from a fixed position.

## Data analysis

The collected data will primarily be used to answer the following questions.

### Key performance indicators

Tab Center's Primary KPIs will be derived from the random survey score and engagement ratio generated by Test Pilot.

### Additional analysis

#### User retention

_Do Tab Center users have longer sessions than other users with Telemetry enabled? Do Tab Center users have longer sessions than other Test Pilot users w/o Tab Center enabled?_

This is not intended as a precise comparative measure but it gives some insight into the overall stickiness of tab center as a differentiating feature.

#### Average Tabs

_Do users with T.C. have a higher average number of tabs?_

Do users with T.C. have a higher average number of tabs per session than other users with UI Telemetry enabled?

<img src="images/tc-graphs-01.png">

_Do people default to the Pinned or Unpinned state more often? At what rate do people change back and forth?_

This will give us an understanding of usage patterns within Tab Center. Does the expand/contract UI with great frequency over a session or do users bucket into mostly pinned and mostly unpinned?

<img src="images/tc-graphs-02.png">

_At what rate do people trigger Tab center expansion and contraction events without otherwise interacting with the tab center UI?_

Triggering this event at a high frequency likely indicates unintended action on the part of the user.

<img src="images/tc-graphs-07.png">

_Do client window dimensions and fullscreen mode affect Tab center usage?_

How do user agent settings affect Tab Center? Is Tab Center more used at certain display sizes and resolutions?

<img src="images/tc-graphs-06.png">

_Release Channel & OS_

Different versions of Firefox have different overall UI (OS X/ Windows/ Linux & Release vs Dev. Edition). Does Tab Center usage track to the broader distribution of Test Pilot users? Anomalies here will help us identify os/version specific issues.

<img src="images/tc-graphs-04.png">

<img src="images/tc-graphs-05.png">

_Is lightweight theme enabled?_

Themes can specify color schemes, this metric tracks what % of our users make use of themes. If a high number we will consider modifying the color scheme of tab center to better match dark themes

<img src="images/tc-graphs-03.png">


## Data collection

Metrics gathered from the Tab Center add-on will be reported to the Test Pilot add-on, which will augment that information and relay it to Firefox’s telemetry system via `submitExternalPing`.

### Telemetry Based Diagnostic Measures

We will collect measures on how users use Tab Center so that if the engagement metrics collected by Test Pilot rise or fall, we can diagnose why/how users might be using the feature differently.

The following Telemetry metrics will be important for optimizing tab Center

- Session Length
- Browser/Client metrics
  - Release Channel
  - OS
  - Firefox Version
  - Using Lightweight theme?
- Window metrics
  - Is browser in fullscreen mode?
  - Client window dimensions?
  - Display resolution

Tab Center will record and report each of the following metrics:

-  Tab behaviors, specifically:
  - Tab creations
  - Tab destructions
  - Tab pins
  - Tab unpins
- Tab Center actions, specifically:
  - Tab Center pins
  - Tab Center unpins
  - Tab Center contraction events
  - Tab Center expansion events
  - Tab Center inaction contraction (Version 2)

This data will be used in three ways:

1. To gain a deeper understanding of how users make use of Tab Center.
2. To gain a deeper understanding of how Tab Center users compared to non-Tab Center users.
3. To segment users into categories that suggest actionable UI changes to Tab Center.

## Data Collection Details

Tab Center is a purely client-side experiment so we will only be collecting metrics from the client leveraging Test Pilot’s reporting functionality with the `testpilottest` type identifier.

Tab Center will record data and submit it periodically (vs sending data continuously).  At launch, we will record and send data every 24 hours or on shutdown of the browser, whichever is first.

An example payload (within the full Telemetry ping):

```js
{
  "version": 1,  // Just in case we need to drastically change the format later
  "tabs_created": 1000,
  "tabs_destroyed": 1000,
  "tabs_pinned": 5,
  "tabs_unpinned": 4,
  "tab_center_pinned": 1,
  "tab_center_unpinned": 0,
  "tab_center_expanded": 9999
  /* "tab_center_teased": 1234  (Version 2) */
}
```

And the schema we will use for Redshift:
```sql
local schema = {
--   column name              field type    length  attributes   field name
    {"timestamp",             "TIMESTAMP",  nil,    "SORTKEY",  "Timestamp"},
    {"uuid",                  "VARCHAR",    36,     nil,        get_uuid},
    {"service",               "VARCHAR",    255,    nil,        "test"},

    {"tabs_created",          "INTEGER",    nil,    nil,        "tabs_created"},
    {"tabs_destroyed",        "INTEGER",    nil,    nil,        "tabs_destroyed"},
    {"tabs_pinned",           "INTEGER",    nil,    nil,        "tabs_pinned"},
    {"tabs_unpinned",         "INTEGER",    nil,    nil,        "tabs_unpinned"},
    {"tab_center_pinned",     "INTEGER",    nil,    nil,        "tab_center_pinned"},
    {"tab_center_unpinned",   "INTEGER",    nil,    nil,        "tab_center_unpinned"},
    {"tab_center_expanded",   "INTEGER",    nil,    nil,        "tab_center_expanded"}
--  {"tab_center_teased",     "INTEGER",    nil,    nil,        "payload[tab_center_teased]"}  (Version 2)
}

```
